doctype html
html(lang="en")
  head
    meta(charset="UTF-8")
    meta(name="viewport", content="width=device-width, initial-scale=1.0")
    title Student Profile
    style.
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: 'Roboto', sans-serif;
        background-color: #f4f6f8;
        color: #333;
        line-height: 1.6;
      }

      header.main {
        display: flex;
        justify-content: space-between;
        align-items: center;
        background-color: #ffffff;
        padding: 16px 60px;
        border-bottom: 1px solid #ddd;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.06);
      }

      .logo img {
        height: 60px;
        object-fit: contain;
      }

      .Login img {
        width: 55px;
        height: 55px;
        border-radius: 50%;
        object-fit: cover;
        cursor: pointer;
      }

      .register a {
        background-color: #0066cc;
        color: white;
        padding: 10px 20px;
        border-radius: 5px;
        font-weight: 500;
        text-decoration: none;
        transition: background-color 0.3s ease;
      }

      .register a:hover {
        background-color: #0051a3;
      }

      .dropdown {
        position: relative;
      }

      .dropdown-content {
        display: none;
        position: absolute;
        top: 70px;
        right: 0;
        background-color: #fff;
        border: 1px solid #ddd;
        border-radius: 6px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        z-index: 999;
        overflow: hidden;
      }

      .dropdown:hover .dropdown-content {
        display: block;
      }

      .dropdown-content a {
        padding: 10px 16px;
        display: block;
        color: #333;
        text-decoration: none;
        font-size: 14px;
      }

      .dropdown-content a:hover {
        background-color: #f2f2f2;
      }

      .main-layout {
        display: flex;
      }

      .sidebar {
        width: 240px;
        background-color: #022b4a;
        color: white;
        padding: 20px;
        min-height: 100vh;
      }

      .sidebar h3 {
        text-align: center;
        font-size: 18px;
        margin-bottom: 25px;
        color: #ffffff;
      }

      .sidebar ul {
        list-style: none;
        padding: 0;
      }

      .sidebar ul li a {
        color: #e1e1e1;
        display: block;
        padding: 10px 14px;
        border-radius: 4px;
        text-decoration: none;
        font-size: 15px;
        transition: background 0.3s ease;
      }

      .sidebar ul li a:hover {
        background-color: #034d7a;
      }

      .profile-container,
      .Atten-container {
        background: white;
        margin: 20px;
        padding: 30px 40px;
        border-radius: 12px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        flex-grow: 1;
      }

      .profile-container {
        display: flex;
        gap: 40px;
        flex-wrap: wrap;
      }

      .profile-left,
      .profile-right {
        flex: 1;
        min-width: 300px;
      }

      h2 {
        margin-bottom: 20px;
        color: #002b5c;
        font-size: 24px;
      }

      .info-group {
        margin-bottom: 12px;
        font-size: 16px;
      }

      .info-label {
        font-weight: 600;
        width: 160px;
        display: inline-block;
        color: #555;
      }

      .info-value {
        color: #222;
      }

      .profile-right img {
        width: 100%;
        max-width: 220px;
        border-radius: 12px;
        border: 2px solid #ccc;
        margin-bottom: 20px;
      }

      .table-container {
        overflow-x: auto;
        margin-top: 20px;
      }

      table {
        width: 100%;
        border-collapse: collapse;
        min-width: 600px;
      }

      th, td {
        padding: 10px 16px;
        text-align: left;
        border-bottom: 1px solid #ddd;
      }

      th {
        background-color: #f0f4f8;
        font-weight: 600;
        color: #002b5c;
      }

      td {
        font-size: 14px;
      }

      td[style*="red"] {
        color: red;
        font-weight: 500;
      }

      td[style*="green"] {
        color: green;
        font-weight: 500;
      }

      /* Responsive Layout */
      @media (max-width: 768px) {
        .main-layout {
          flex-direction: column;
        }

        .sidebar {
          width: 100%;
        }

        .profile-container {
          flex-direction: column;
        }

        .profile-right img {
          margin: 0 auto;
        }
      }

      /* PRINT STYLES */
      @media print {
        body {
          background: white;
          color: black;
        }

        .sidebar, .register, .Login, .dropdown-content, .main-layout > *:not(.profile-container):not(.Atten-container) {
          display: none !important;
        }

        .logo {
          display: flex;
          justify-content: center;
          margin: 30px auto;
          width: 100%;
        }

        .logo img {
          height: 100px;
        }

        .profile-container,
        .Atten-container {
          margin: 0;
          box-shadow: none;
          page-break-after: always;
        }

        h2 {
          text-align: center;
        }
        ul p{
          display:inline;
        }
      }

  body
    .main-layout
      .sidebar
        h3 MENU
        ul
          li: a(href="#", id="biodata-link") BIO DATA
          li: a(href="#", id="attendance-link") ATTENDANCE
          li: a(href="/login") LOGOUT

      .profile-container(id="profileSection", style="display: flex;")
        .profile-left
          h2= user.name
          .info-group
            span.info-label Admission No:
            span.info-value= user.admissionNo
          .info-group
            span.info-label Roll No:
            span.info-value= user.rollNo
          .info-group
            span.info-label Course:
            span.info-value= user.course
          .info-group
            span.info-label Branch:
            span.info-value= user.branch
          .info-group
            span.info-label Semester:
            span.info-value= user.semester
          .info-group
            span.info-label Gender:
            span.info-value= user.gender
          .info-group
            span.info-label DOB:
            span.info-value= user.dob
          .info-group
            span.info-label Nationality:
            span.info-value= user.nationality
          .info-group
            span.info-label Religion:
            span.info-value= user.religion
          .info-group
            span.info-label SSC Marks %:
            span.info-value= user.sscMarks
          .info-group
            span.info-label SSC Gradepoints:
            span.info-value= user.sscGradepoints
          .info-group
            span.info-label Inter Marks %:
            span.info-value= user.interMarks
          .info-group
            span.info-label Inter Gradepoints:
            span.info-value= user.interGradepoints
          .info-group
            span.info-label EAMCET Rank:
            span.info-value= user.eamcetRank
          .info-group
            span.info-label Seat Type:
            span.info-value= user.seatType
          .info-group
            span.info-label Caste:
            span.info-value= user.caste
          .info-group
            span.info-label Joining Date:
            span.info-value= user.joiningDate
          .info-group
            span.info-label Phone No:
            span.info-value= user.contact
          .info-group
            span.info-label Email:
            span.info-value karanamdhanunjay99@gmail.com

        .profile-right
          img(src=file, alt="Profile Photo")
          .info-group
            span.info-label Blood Group:
            span.info-value B+
          .info-group
            span.info-label Father's Name:
            span.info-value Karanam Ramesh
          .info-group
            span.info-label Mother's Name:
            span.info-value Karanam Lakshmi
          .info-group
            span.info-label Aadhar No:
            span.info-value 1234 5678 9101
          .info-group
            span.info-label Guardian Contact:
            span.info-value 9988776655
          .info-group
            span.info-label Address:
            span.info-value Vijayawada, AP
          .info-group
            span.info-label Languages:
            span.info-value Telugu, English

      .Atten-container(id="AttendanceSection", style="display: none;")
          h2 Attendance Summary
          if dates && dates.length > 0
            .table-container
              table(border="1", cellpadding="8", cellspacing="0")
                thead
                  tr
                    th Subject
                    each date in dates
                      th= date
                tbody
                  each subject in subjects
                    tr
                      td= subject
                      each date in dates
                        - const statusArray = groupedAttendance[subject]?.[date] || [];
                        td
                          ul
                            each status in statusArray
                              p(style={ color: status === 'A' ? 'red' : 'green', display: 'flex' })= status
              a(href=`/download-attendance/${user.rollNo}`) Download Attendance (PDF)
          else
            p No attendance data available.


    script.
      document.getElementById("biodata-link").addEventListener("click", function(e) {
        e.preventDefault();
        document.getElementById("profileSection").style.display = "flex";
        document.getElementById("AttendanceSection").style.display = "none";
      });

      document.getElementById("attendance-link").addEventListener("click", function(e) {
        e.preventDefault();
        document.getElementById("AttendanceSection").style.display = "block";
        document.getElementById("profileSection").style.display = "none";
      });

      const params = new URLSearchParams(window.location.search);
      if (params.get('showBio') === 'true') {
        document.getElementById("profileSection").style.display = "flex";
        document.getElementById("AttendanceSection").style.display = "none";
      }
      if (params.get('showatt') === 'true') {
        document.getElementById("AttendanceSection").style.display = "block";
        document.getElementById("profileSection").style.display = "none";
      }